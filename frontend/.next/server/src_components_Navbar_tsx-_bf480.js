"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "src_components_Navbar_tsx-_bf480";
exports.ids = ["src_components_Navbar_tsx-_bf480"];
exports.modules = {

/***/ "__barrel_optimize__?names=Shield!=!./node_modules/lucide-react/dist/esm/lucide-react.js":
/*!***********************************************************************************************!*\
  !*** __barrel_optimize__?names=Shield!=!./node_modules/lucide-react/dist/esm/lucide-react.js ***!
  \***********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Shield: () => (/* reexport safe */ _icons_shield_js__WEBPACK_IMPORTED_MODULE_0__["default"])
/* harmony export */ });
/* harmony import */ var _icons_shield_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./icons/shield.js */ "./node_modules/lucide-react/dist/esm/icons/shield.js");



/***/ }),

/***/ "./src/components/Navbar.tsx":
/*!***********************************!*\
  !*** ./src/components/Navbar.tsx ***!
  \***********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Navbar)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_link__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/link */ \"./node_modules/next/link.js\");\n/* harmony import */ var next_link__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_link__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/router */ \"./node_modules/next/router.js\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _lib_api__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/api */ \"./src/lib/api.ts\");\n/* harmony import */ var _components_ui_button__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/components/ui/button */ \"./src/components/ui/button.tsx\");\n/* harmony import */ var _barrel_optimize_names_Shield_lucide_react__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! __barrel_optimize__?names=Shield!=!lucide-react */ \"__barrel_optimize__?names=Shield!=!./node_modules/lucide-react/dist/esm/lucide-react.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_components_ui_button__WEBPACK_IMPORTED_MODULE_5__]);\n_components_ui_button__WEBPACK_IMPORTED_MODULE_5__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n// src/components/Navbar.tsx\n/* __next_internal_client_entry_do_not_use__ default auto */ \n\n\n\n\n\n\nconst AUTH_USER_KEY = \"auth_user\";\nconst AUTH_TOKEN_KEY = \"auth_token\"; // keep in sync with lib/api.ts if key name differs\nfunction Navbar() {\n    const router = (0,next_router__WEBPACK_IMPORTED_MODULE_3__.useRouter)();\n    // Synchronous initial state from localStorage/token -> makes UI optimistic/immediate\n    const [signedIn, setSignedIn] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(()=>{\n        try {\n            return !!(0,_lib_api__WEBPACK_IMPORTED_MODULE_4__.getAuthToken)();\n        } catch  {\n            return false;\n        }\n    });\n    const [user, setUser] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(()=>{\n        try {\n            const raw =  false ? 0 : null;\n            return raw ? JSON.parse(raw) : null;\n        } catch  {\n            return null;\n        }\n    });\n    const [isFetchingUser, setIsFetchingUser] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n    // Fetch fresh user in background without blocking the UI\n    const fetchUserBackground = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(async (strictOnAuthFail = false)=>{\n        const token = (0,_lib_api__WEBPACK_IMPORTED_MODULE_4__.getAuthToken)();\n        setSignedIn(!!token);\n        if (!token) {\n            // no token -> signed out\n            setUser(null);\n            try {\n                localStorage.removeItem(AUTH_USER_KEY);\n            } catch  {}\n            return;\n        }\n        setIsFetchingUser(true);\n        try {\n            const u = await (0,_lib_api__WEBPACK_IMPORTED_MODULE_4__.getCurrentUser)();\n            const normalized = {\n                firstName: u.firstName ?? u.first_name ?? null,\n                lastName: u.lastName ?? u.last_name ?? null,\n                email: u.email ?? null,\n                profileImageUrl: u.profileImageUrl ?? u.profile_image_url ?? null\n            };\n            setUser(normalized);\n            // update cached user for instant future renders\n            try {\n                localStorage.setItem(AUTH_USER_KEY, JSON.stringify(normalized));\n            } catch  {}\n        } catch (err) {\n            if (strictOnAuthFail && /401|Unauthorized/i.test(String(err?.message ?? \"\"))) {\n                setSignedIn(false);\n                setUser(null);\n                try {\n                    localStorage.removeItem(AUTH_USER_KEY);\n                    localStorage.removeItem(AUTH_TOKEN_KEY);\n                } catch  {}\n            } else {\n                setUser(null);\n            }\n        } finally{\n            setIsFetchingUser(false);\n        }\n    }, []);\n    // Stable handler for events\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{\n        // run once on mount to ensure background fetch runs and keeps things fresh\n        fetchUserBackground();\n        const onAuthChange = (e)=>{\n            fetchUserBackground(true);\n        };\n        const onStorage = (e)=>{\n            if (!e.key) {\n                fetchUserBackground(true);\n                return;\n            }\n            if (e.key === AUTH_TOKEN_KEY || e.key === AUTH_USER_KEY) {\n                fetchUserBackground(true);\n            }\n        };\n        const onRoute = ()=>{\n            fetchUserBackground();\n        };\n        window.addEventListener(\"auth-change\", onAuthChange);\n        window.addEventListener(\"storage\", onStorage);\n        router.events?.on?.(\"routeChangeComplete\", onRoute);\n        return ()=>{\n            window.removeEventListener(\"auth-change\", onAuthChange);\n            window.removeEventListener(\"storage\", onStorage);\n            router.events?.off?.(\"routeChangeComplete\", onRoute);\n        };\n    }, [\n        fetchUserBackground,\n        router.events\n    ]);\n    const handleLogout = async ()=>{\n        try {\n            await (0,_lib_api__WEBPACK_IMPORTED_MODULE_4__.logout)();\n        } catch  {\n        // ignore backend logout errors — still clear client state\n        } finally{\n            try {\n                localStorage.removeItem(AUTH_TOKEN_KEY);\n                localStorage.removeItem(AUTH_USER_KEY);\n            } catch  {}\n            window.dispatchEvent(new CustomEvent(\"auth-change\", {\n                detail: {\n                    source: \"logout\"\n                }\n            }));\n            setSignedIn(false);\n            setUser(null);\n            router.push(\"/\");\n        }\n    };\n    // Small UI helpers\n    const displayName = user ? user.firstName && user.lastName ? `${user.firstName} ${user.lastName}` : user.firstName ?? user.email ?? \"User\" : \"\";\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"header\", {\n        className: \"fixed top-0 left-0 right-0 z-50 bg-background/80 backdrop-blur-sm border-b\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"nav\", {\n            className: \"container mx-auto px-4 h-16 flex items-center justify-between\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((next_link__WEBPACK_IMPORTED_MODULE_1___default()), {\n                    href: \"/\",\n                    className: \"flex items-center gap-2 cursor-pointer\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Shield_lucide_react__WEBPACK_IMPORTED_MODULE_6__.Shield, {\n                            className: \"h-6 w-6 text-primary\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\choud\\\\OneDrive\\\\Documents\\\\Project 15 LPA\\\\DeepFake-Detector\\\\frontend\\\\src\\\\components\\\\Navbar.tsx\",\n                            lineNumber: 163,\n                            columnNumber: 9\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                            className: \"text-xl font-bold tracking-tight\",\n                            children: \"DeepVerify\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\choud\\\\OneDrive\\\\Documents\\\\Project 15 LPA\\\\DeepFake-Detector\\\\frontend\\\\src\\\\components\\\\Navbar.tsx\",\n                            lineNumber: 164,\n                            columnNumber: 9\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\Users\\\\choud\\\\OneDrive\\\\Documents\\\\Project 15 LPA\\\\DeepFake-Detector\\\\frontend\\\\src\\\\components\\\\Navbar.tsx\",\n                    lineNumber: 162,\n                    columnNumber: 7\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex items-center gap-4\",\n                    children: signedIn ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((next_link__WEBPACK_IMPORTED_MODULE_1___default()), {\n                                href: \"/dashboard\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    className: \"hover:text-indigo-600 cursor-pointer\",\n                                    children: \"Dashboard\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\choud\\\\OneDrive\\\\Documents\\\\Project 15 LPA\\\\DeepFake-Detector\\\\frontend\\\\src\\\\components\\\\Navbar.tsx\",\n                                    lineNumber: 171,\n                                    columnNumber: 15\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\choud\\\\OneDrive\\\\Documents\\\\Project 15 LPA\\\\DeepFake-Detector\\\\frontend\\\\src\\\\components\\\\Navbar.tsx\",\n                                lineNumber: 170,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((next_link__WEBPACK_IMPORTED_MODULE_1___default()), {\n                                href: \"/membership\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    className: \"hover:text-indigo-600 cursor-pointer\",\n                                    children: \"Membership\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\choud\\\\OneDrive\\\\Documents\\\\Project 15 LPA\\\\DeepFake-Detector\\\\frontend\\\\src\\\\components\\\\Navbar.tsx\",\n                                    lineNumber: 175,\n                                    columnNumber: 15\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\choud\\\\OneDrive\\\\Documents\\\\Project 15 LPA\\\\DeepFake-Detector\\\\frontend\\\\src\\\\components\\\\Navbar.tsx\",\n                                lineNumber: 174,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((next_link__WEBPACK_IMPORTED_MODULE_1___default()), {\n                                href: \"/support\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    className: \"hover:text-indigo-600 cursor-pointer\",\n                                    children: \"Support\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\choud\\\\OneDrive\\\\Documents\\\\Project 15 LPA\\\\DeepFake-Detector\\\\frontend\\\\src\\\\components\\\\Navbar.tsx\",\n                                    lineNumber: 179,\n                                    columnNumber: 15\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\choud\\\\OneDrive\\\\Documents\\\\Project 15 LPA\\\\DeepFake-Detector\\\\frontend\\\\src\\\\components\\\\Navbar.tsx\",\n                                lineNumber: 178,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: handleLogout,\n                                className: \"px-3 py-2 bg-red-50 text-red-700 rounded hover:bg-red-100\",\n                                children: \"Sign Out\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\choud\\\\OneDrive\\\\Documents\\\\Project 15 LPA\\\\DeepFake-Detector\\\\frontend\\\\src\\\\components\\\\Navbar.tsx\",\n                                lineNumber: 182,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_5__.Button, {\n                                asChild: true,\n                                \"data-testid\": \"button-signin\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((next_link__WEBPACK_IMPORTED_MODULE_1___default()), {\n                                    href: \"/login\",\n                                    children: \"Sign In\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\choud\\\\OneDrive\\\\Documents\\\\Project 15 LPA\\\\DeepFake-Detector\\\\frontend\\\\src\\\\components\\\\Navbar.tsx\",\n                                    lineNumber: 192,\n                                    columnNumber: 15\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\choud\\\\OneDrive\\\\Documents\\\\Project 15 LPA\\\\DeepFake-Detector\\\\frontend\\\\src\\\\components\\\\Navbar.tsx\",\n                                lineNumber: 191,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((next_link__WEBPACK_IMPORTED_MODULE_1___default()), {\n                                href: \"/register\",\n                                className: \"px-4 py-2 bg-slate-100 text-slate-700 rounded hover:bg-slate-200\",\n                                children: \"Sign Up\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\choud\\\\OneDrive\\\\Documents\\\\Project 15 LPA\\\\DeepFake-Detector\\\\frontend\\\\src\\\\components\\\\Navbar.tsx\",\n                                lineNumber: 195,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true)\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\choud\\\\OneDrive\\\\Documents\\\\Project 15 LPA\\\\DeepFake-Detector\\\\frontend\\\\src\\\\components\\\\Navbar.tsx\",\n                    lineNumber: 167,\n                    columnNumber: 7\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"C:\\\\Users\\\\choud\\\\OneDrive\\\\Documents\\\\Project 15 LPA\\\\DeepFake-Detector\\\\frontend\\\\src\\\\components\\\\Navbar.tsx\",\n            lineNumber: 161,\n            columnNumber: 5\n        }, this)\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\choud\\\\OneDrive\\\\Documents\\\\Project 15 LPA\\\\DeepFake-Detector\\\\frontend\\\\src\\\\components\\\\Navbar.tsx\",\n        lineNumber: 160,\n        columnNumber: 3\n    }, this);\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q2tFLE1BQUs7MENBQ1QsNEVBQUNDO29DQUFLSCxXQUFVOzhDQUF1Qzs7Ozs7Ozs7Ozs7MENBR3pELDhEQUFDaEUsa0RBQUlBO2dDQUFDa0UsTUFBSzswQ0FDVCw0RUFBQ0M7b0NBQUtILFdBQVU7OENBQXVDOzs7Ozs7Ozs7OzswQ0FHekQsOERBQUNoRSxrREFBSUE7Z0NBQUNrRSxNQUFLOzBDQUNULDRFQUFDQztvQ0FBS0gsV0FBVTs4Q0FBdUM7Ozs7Ozs7Ozs7OzBDQUd6RCw4REFBQ0s7Z0NBQ0NDLFNBQVNkO2dDQUNUUSxXQUFVOzBDQUNYOzs7Ozs7O3FEQUtIOzswQ0FDRSw4REFBQ3ZELHlEQUFNQTtnQ0FBQzhELE9BQU87Z0NBQUNDLGVBQVk7MENBQzFCLDRFQUFDeEUsa0RBQUlBO29DQUFDa0UsTUFBSzs4Q0FBUzs7Ozs7Ozs7Ozs7MENBR3RCLDhEQUFDbEUsa0RBQUlBO2dDQUNIa0UsTUFBSztnQ0FDTEYsV0FBVTswQ0FDWDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBU2IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZWVwZmFrZS1mcm9udGVuZC8uL3NyYy9jb21wb25lbnRzL05hdmJhci50c3g/OWE2ZCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvY29tcG9uZW50cy9OYXZiYXIudHN4XHJcblwidXNlIGNsaWVudFwiO1xyXG5cclxuaW1wb3J0IExpbmsgZnJvbSBcIm5leHQvbGlua1wiO1xyXG5pbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgeyB1c2VSb3V0ZXIgfSBmcm9tIFwibmV4dC9yb3V0ZXJcIjtcclxuXHJcbmltcG9ydCB7IGdldEF1dGhUb2tlbiwgZ2V0Q3VycmVudFVzZXIsIGxvZ291dCBhcyBhcGlMb2dvdXQgfSBmcm9tIFwiQC9saWIvYXBpXCI7XHJcblxyXG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tIFwiQC9jb21wb25lbnRzL3VpL2J1dHRvblwiO1xyXG5pbXBvcnQgeyBBdmF0YXIsIEF2YXRhckZhbGxiYWNrLCBBdmF0YXJJbWFnZSB9IGZyb20gXCJAL2NvbXBvbmVudHMvdWkvYXZhdGFyXCI7XHJcbmltcG9ydCB7XHJcbiAgRHJvcGRvd25NZW51LFxyXG4gIERyb3Bkb3duTWVudUNvbnRlbnQsXHJcbiAgRHJvcGRvd25NZW51SXRlbSxcclxuICBEcm9wZG93bk1lbnVTZXBhcmF0b3IsXHJcbiAgRHJvcGRvd25NZW51VHJpZ2dlcixcclxufSBmcm9tIFwiQC9jb21wb25lbnRzL3VpL2Ryb3Bkb3duLW1lbnVcIjtcclxuXHJcbmltcG9ydCB7IFNoaWVsZCwgTG9nT3V0LCBMYXlvdXREYXNoYm9hcmQgfSBmcm9tIFwibHVjaWRlLXJlYWN0XCI7XHJcblxyXG5pbnRlcmZhY2UgVXNlciB7XHJcbiAgZmlyc3ROYW1lPzogc3RyaW5nIHwgbnVsbDtcclxuICBsYXN0TmFtZT86IHN0cmluZyB8IG51bGw7XHJcbiAgZW1haWw/OiBzdHJpbmcgfCBudWxsO1xyXG4gIHByb2ZpbGVJbWFnZVVybD86IHN0cmluZyB8IG51bGw7XHJcbn1cclxuXHJcbmNvbnN0IEFVVEhfVVNFUl9LRVkgPSBcImF1dGhfdXNlclwiO1xyXG5jb25zdCBBVVRIX1RPS0VOX0tFWSA9IFwiYXV0aF90b2tlblwiOyAvLyBrZWVwIGluIHN5bmMgd2l0aCBsaWIvYXBpLnRzIGlmIGtleSBuYW1lIGRpZmZlcnNcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIE5hdmJhcigpIHtcclxuICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKTtcclxuXHJcbiAgLy8gU3luY2hyb25vdXMgaW5pdGlhbCBzdGF0ZSBmcm9tIGxvY2FsU3RvcmFnZS90b2tlbiAtPiBtYWtlcyBVSSBvcHRpbWlzdGljL2ltbWVkaWF0ZVxyXG4gIGNvbnN0IFtzaWduZWRJbiwgc2V0U2lnbmVkSW5dID0gdXNlU3RhdGU8Ym9vbGVhbj4oKCkgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgcmV0dXJuICEhZ2V0QXV0aFRva2VuKCk7XHJcbiAgICB9IGNhdGNoIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICBjb25zdCBbdXNlciwgc2V0VXNlcl0gPSB1c2VTdGF0ZTxVc2VyIHwgbnVsbD4oKCkgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgcmF3ID0gdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IGxvY2FsU3RvcmFnZS5nZXRJdGVtKEFVVEhfVVNFUl9LRVkpIDogbnVsbDtcclxuICAgICAgcmV0dXJuIHJhdyA/IEpTT04ucGFyc2UocmF3KSA6IG51bGw7XHJcbiAgICB9IGNhdGNoIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIGNvbnN0IFtpc0ZldGNoaW5nVXNlciwgc2V0SXNGZXRjaGluZ1VzZXJdID0gdXNlU3RhdGU8Ym9vbGVhbj4oZmFsc2UpO1xyXG5cclxuICAvLyBGZXRjaCBmcmVzaCB1c2VyIGluIGJhY2tncm91bmQgd2l0aG91dCBibG9ja2luZyB0aGUgVUlcclxuICBjb25zdCBmZXRjaFVzZXJCYWNrZ3JvdW5kID0gdXNlQ2FsbGJhY2soYXN5bmMgKHN0cmljdE9uQXV0aEZhaWwgPSBmYWxzZSkgPT4ge1xyXG4gICAgY29uc3QgdG9rZW4gPSBnZXRBdXRoVG9rZW4oKTtcclxuICAgIHNldFNpZ25lZEluKCEhdG9rZW4pO1xyXG5cclxuICAgIGlmICghdG9rZW4pIHtcclxuICAgICAgLy8gbm8gdG9rZW4gLT4gc2lnbmVkIG91dFxyXG4gICAgICBzZXRVc2VyKG51bGwpO1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKEFVVEhfVVNFUl9LRVkpO1xyXG4gICAgICB9IGNhdGNoIHt9XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBzZXRJc0ZldGNoaW5nVXNlcih0cnVlKTtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHUgPSBhd2FpdCBnZXRDdXJyZW50VXNlcigpO1xyXG4gICAgICBjb25zdCBub3JtYWxpemVkOiBVc2VyID0ge1xyXG4gICAgICAgIGZpcnN0TmFtZTogKHUgYXMgYW55KS5maXJzdE5hbWUgPz8gKHUgYXMgYW55KS5maXJzdF9uYW1lID8/IG51bGwsXHJcbiAgICAgICAgbGFzdE5hbWU6ICh1IGFzIGFueSkubGFzdE5hbWUgPz8gKHUgYXMgYW55KS5sYXN0X25hbWUgPz8gbnVsbCxcclxuICAgICAgICBlbWFpbDogKHUgYXMgYW55KS5lbWFpbCA/PyBudWxsLFxyXG4gICAgICAgIHByb2ZpbGVJbWFnZVVybDpcclxuICAgICAgICAgICh1IGFzIGFueSkucHJvZmlsZUltYWdlVXJsID8/ICh1IGFzIGFueSkucHJvZmlsZV9pbWFnZV91cmwgPz8gbnVsbCxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHNldFVzZXIobm9ybWFsaXplZCk7XHJcbiAgICAgIC8vIHVwZGF0ZSBjYWNoZWQgdXNlciBmb3IgaW5zdGFudCBmdXR1cmUgcmVuZGVyc1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKEFVVEhfVVNFUl9LRVksIEpTT04uc3RyaW5naWZ5KG5vcm1hbGl6ZWQpKTtcclxuICAgICAgfSBjYXRjaCB7fVxyXG4gICAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcclxuICAgICAgaWYgKHN0cmljdE9uQXV0aEZhaWwgJiYgLzQwMXxVbmF1dGhvcml6ZWQvaS50ZXN0KFN0cmluZyhlcnI/Lm1lc3NhZ2UgPz8gXCJcIikpKSB7XHJcbiAgICAgICAgc2V0U2lnbmVkSW4oZmFsc2UpO1xyXG4gICAgICAgIHNldFVzZXIobnVsbCk7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKEFVVEhfVVNFUl9LRVkpO1xyXG4gICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oQVVUSF9UT0tFTl9LRVkpO1xyXG4gICAgICAgIH0gY2F0Y2gge31cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBzZXRVc2VyKG51bGwpO1xyXG4gICAgICB9XHJcbiAgICB9IGZpbmFsbHkge1xyXG4gICAgICBzZXRJc0ZldGNoaW5nVXNlcihmYWxzZSk7XHJcbiAgICB9XHJcbiAgfSwgW10pO1xyXG5cclxuICAvLyBTdGFibGUgaGFuZGxlciBmb3IgZXZlbnRzXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIC8vIHJ1biBvbmNlIG9uIG1vdW50IHRvIGVuc3VyZSBiYWNrZ3JvdW5kIGZldGNoIHJ1bnMgYW5kIGtlZXBzIHRoaW5ncyBmcmVzaFxyXG4gICAgZmV0Y2hVc2VyQmFja2dyb3VuZCgpO1xyXG5cclxuICAgIGNvbnN0IG9uQXV0aENoYW5nZSA9IChlOiBFdmVudCkgPT4ge1xyXG4gICAgICBmZXRjaFVzZXJCYWNrZ3JvdW5kKHRydWUpO1xyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBvblN0b3JhZ2UgPSAoZTogU3RvcmFnZUV2ZW50KSA9PiB7XHJcbiAgICAgIGlmICghZS5rZXkpIHtcclxuICAgICAgICBmZXRjaFVzZXJCYWNrZ3JvdW5kKHRydWUpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBpZiAoZS5rZXkgPT09IEFVVEhfVE9LRU5fS0VZIHx8IGUua2V5ID09PSBBVVRIX1VTRVJfS0VZKSB7XHJcbiAgICAgICAgZmV0Y2hVc2VyQmFja2dyb3VuZCh0cnVlKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBvblJvdXRlID0gKCkgPT4ge1xyXG4gICAgICBmZXRjaFVzZXJCYWNrZ3JvdW5kKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiYXV0aC1jaGFuZ2VcIiwgb25BdXRoQ2hhbmdlKTtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic3RvcmFnZVwiLCBvblN0b3JhZ2UpO1xyXG4gICAgKHJvdXRlci5ldmVudHMgYXMgYW55KT8ub24/LihcInJvdXRlQ2hhbmdlQ29tcGxldGVcIiwgb25Sb3V0ZSk7XHJcblxyXG4gICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJhdXRoLWNoYW5nZVwiLCBvbkF1dGhDaGFuZ2UpO1xyXG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInN0b3JhZ2VcIiwgb25TdG9yYWdlKTtcclxuICAgICAgKHJvdXRlci5ldmVudHMgYXMgYW55KT8ub2ZmPy4oXCJyb3V0ZUNoYW5nZUNvbXBsZXRlXCIsIG9uUm91dGUpO1xyXG4gICAgfTtcclxuICB9LCBbZmV0Y2hVc2VyQmFja2dyb3VuZCwgcm91dGVyLmV2ZW50c10pO1xyXG5cclxuICBjb25zdCBoYW5kbGVMb2dvdXQgPSBhc3luYyAoKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBhd2FpdCBhcGlMb2dvdXQoKTtcclxuICAgIH0gY2F0Y2gge1xyXG4gICAgICAvLyBpZ25vcmUgYmFja2VuZCBsb2dvdXQgZXJyb3JzIOKAlCBzdGlsbCBjbGVhciBjbGllbnQgc3RhdGVcclxuICAgIH0gZmluYWxseSB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oQVVUSF9UT0tFTl9LRVkpO1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKEFVVEhfVVNFUl9LRVkpO1xyXG4gICAgICB9IGNhdGNoIHt9XHJcbiAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChcImF1dGgtY2hhbmdlXCIsIHsgZGV0YWlsOiB7IHNvdXJjZTogXCJsb2dvdXRcIiB9IH0pKTtcclxuICAgICAgc2V0U2lnbmVkSW4oZmFsc2UpO1xyXG4gICAgICBzZXRVc2VyKG51bGwpO1xyXG4gICAgICByb3V0ZXIucHVzaChcIi9cIik7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLy8gU21hbGwgVUkgaGVscGVyc1xyXG4gIGNvbnN0IGRpc3BsYXlOYW1lID0gdXNlclxyXG4gICAgPyB1c2VyLmZpcnN0TmFtZSAmJiB1c2VyLmxhc3ROYW1lXHJcbiAgICAgID8gYCR7dXNlci5maXJzdE5hbWV9ICR7dXNlci5sYXN0TmFtZX1gXHJcbiAgICAgIDogdXNlci5maXJzdE5hbWUgPz8gdXNlci5lbWFpbCA/PyBcIlVzZXJcIlxyXG4gICAgOiBcIlwiO1xyXG5cclxuIHJldHVybiAoXHJcbiAgPGhlYWRlciBjbGFzc05hbWU9XCJmaXhlZCB0b3AtMCBsZWZ0LTAgcmlnaHQtMCB6LTUwIGJnLWJhY2tncm91bmQvODAgYmFja2Ryb3AtYmx1ci1zbSBib3JkZXItYlwiPlxyXG4gICAgPG5hdiBjbGFzc05hbWU9XCJjb250YWluZXIgbXgtYXV0byBweC00IGgtMTYgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuXCI+XHJcbiAgICAgIDxMaW5rIGhyZWY9XCIvXCIgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgY3Vyc29yLXBvaW50ZXJcIj5cclxuICAgICAgICA8U2hpZWxkIGNsYXNzTmFtZT1cImgtNiB3LTYgdGV4dC1wcmltYXJ5XCIgLz5cclxuICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXhsIGZvbnQtYm9sZCB0cmFja2luZy10aWdodFwiPkRlZXBWZXJpZnk8L3NwYW4+XHJcbiAgICAgIDwvTGluaz5cclxuXHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTRcIj5cclxuICAgICAgICB7c2lnbmVkSW4gPyAoXHJcbiAgICAgICAgICA8PlxyXG4gICAgICAgICAgICA8TGluayBocmVmPVwiL2Rhc2hib2FyZFwiPlxyXG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImhvdmVyOnRleHQtaW5kaWdvLTYwMCBjdXJzb3ItcG9pbnRlclwiPkRhc2hib2FyZDwvc3Bhbj5cclxuICAgICAgICAgICAgPC9MaW5rPlxyXG5cclxuICAgICAgICAgICAgPExpbmsgaHJlZj1cIi9tZW1iZXJzaGlwXCI+XHJcbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiaG92ZXI6dGV4dC1pbmRpZ28tNjAwIGN1cnNvci1wb2ludGVyXCI+TWVtYmVyc2hpcDwvc3Bhbj5cclxuICAgICAgICAgICAgPC9MaW5rPlxyXG5cclxuICAgICAgICAgICAgPExpbmsgaHJlZj1cIi9zdXBwb3J0XCI+XHJcbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiaG92ZXI6dGV4dC1pbmRpZ28tNjAwIGN1cnNvci1wb2ludGVyXCI+U3VwcG9ydDwvc3Bhbj5cclxuICAgICAgICAgICAgPC9MaW5rPlxyXG5cclxuICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZUxvZ291dH1cclxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJweC0zIHB5LTIgYmctcmVkLTUwIHRleHQtcmVkLTcwMCByb3VuZGVkIGhvdmVyOmJnLXJlZC0xMDBcIlxyXG4gICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgU2lnbiBPdXRcclxuICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICA8Lz5cclxuICAgICAgICApIDogKFxyXG4gICAgICAgICAgPD5cclxuICAgICAgICAgICAgPEJ1dHRvbiBhc0NoaWxkIGRhdGEtdGVzdGlkPVwiYnV0dG9uLXNpZ25pblwiPlxyXG4gICAgICAgICAgICAgIDxMaW5rIGhyZWY9XCIvbG9naW5cIj5TaWduIEluPC9MaW5rPlxyXG4gICAgICAgICAgICA8L0J1dHRvbj5cclxuXHJcbiAgICAgICAgICAgIDxMaW5rXHJcbiAgICAgICAgICAgICAgaHJlZj1cIi9yZWdpc3RlclwiXHJcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicHgtNCBweS0yIGJnLXNsYXRlLTEwMCB0ZXh0LXNsYXRlLTcwMCByb3VuZGVkIGhvdmVyOmJnLXNsYXRlLTIwMFwiXHJcbiAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICBTaWduIFVwXHJcbiAgICAgICAgICAgIDwvTGluaz5cclxuICAgICAgICAgIDwvPlxyXG4gICAgICAgICl9XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9uYXY+XHJcbiAgPC9oZWFkZXI+XHJcbik7XHJcbn1cclxuIl0sIm5hbWVzIjpbIkxpbmsiLCJ1c2VDYWxsYmFjayIsInVzZUVmZmVjdCIsInVzZVN0YXRlIiwidXNlUm91dGVyIiwiZ2V0QXV0aFRva2VuIiwiZ2V0Q3VycmVudFVzZXIiLCJsb2dvdXQiLCJhcGlMb2dvdXQiLCJCdXR0b24iLCJTaGllbGQiLCJBVVRIX1VTRVJfS0VZIiwiQVVUSF9UT0tFTl9LRVkiLCJOYXZiYXIiLCJyb3V0ZXIiLCJzaWduZWRJbiIsInNldFNpZ25lZEluIiwidXNlciIsInNldFVzZXIiLCJyYXciLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiSlNPTiIsInBhcnNlIiwiaXNGZXRjaGluZ1VzZXIiLCJzZXRJc0ZldGNoaW5nVXNlciIsImZldGNoVXNlckJhY2tncm91bmQiLCJzdHJpY3RPbkF1dGhGYWlsIiwidG9rZW4iLCJyZW1vdmVJdGVtIiwidSIsIm5vcm1hbGl6ZWQiLCJmaXJzdE5hbWUiLCJmaXJzdF9uYW1lIiwibGFzdE5hbWUiLCJsYXN0X25hbWUiLCJlbWFpbCIsInByb2ZpbGVJbWFnZVVybCIsInByb2ZpbGVfaW1hZ2VfdXJsIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsImVyciIsInRlc3QiLCJTdHJpbmciLCJtZXNzYWdlIiwib25BdXRoQ2hhbmdlIiwiZSIsIm9uU3RvcmFnZSIsImtleSIsIm9uUm91dGUiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnRzIiwib24iLCJyZW1vdmVFdmVudExpc3RlbmVyIiwib2ZmIiwiaGFuZGxlTG9nb3V0IiwiZGlzcGF0Y2hFdmVudCIsIkN1c3RvbUV2ZW50IiwiZGV0YWlsIiwic291cmNlIiwicHVzaCIsImRpc3BsYXlOYW1lIiwiaGVhZGVyIiwiY2xhc3NOYW1lIiwibmF2IiwiaHJlZiIsInNwYW4iLCJkaXYiLCJidXR0b24iLCJvbkNsaWNrIiwiYXNDaGlsZCIsImRhdGEtdGVzdGlkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/components/Navbar.tsx\n");

/***/ }),

/***/ "./src/lib/api.ts":
/*!************************!*\
  !*** ./src/lib/api.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   API_BASE: () => (/* binding */ API_BASE),\n/* harmony export */   fetcher: () => (/* binding */ fetcher),\n/* harmony export */   getAuthHeaders: () => (/* binding */ getAuthHeaders),\n/* harmony export */   getAuthToken: () => (/* binding */ getAuthToken),\n/* harmony export */   getCurrentUser: () => (/* binding */ getCurrentUser),\n/* harmony export */   getDashboard: () => (/* binding */ getDashboard),\n/* harmony export */   getJob: () => (/* binding */ getJob),\n/* harmony export */   login: () => (/* binding */ login),\n/* harmony export */   logout: () => (/* binding */ logout),\n/* harmony export */   register: () => (/* binding */ register),\n/* harmony export */   removeAuthToken: () => (/* binding */ removeAuthToken),\n/* harmony export */   setAuthToken: () => (/* binding */ setAuthToken),\n/* harmony export */   uploadImage: () => (/* binding */ uploadImage)\n/* harmony export */ });\n/* --------------------------------------------\r\n   API BASE URL\r\n---------------------------------------------*/ // If NEXT_PUBLIC_API_URL is set → use real backend.\n// Otherwise default to http://localhost:8000 for dev.\nconst API_BASE = \"http://localhost:8000\" || 0;\n/* --------------------------------------------\r\n   AUTHENTICATION HELPERS\r\n---------------------------------------------*/ function getAuthToken() {\n    if (true) return null;\n    return localStorage.getItem(\"auth_token\");\n}\nfunction setAuthToken(token) {\n    if (true) return;\n    localStorage.setItem(\"auth_token\", token);\n}\nfunction removeAuthToken() {\n    if (true) return;\n    localStorage.removeItem(\"auth_token\");\n}\nfunction getAuthHeaders() {\n    const token = getAuthToken();\n    const headers = {};\n    if (token) {\n        headers[\"Authorization\"] = `Bearer ${token}`;\n    }\n    return headers;\n}\n/* --------------------------------------------\r\n   Helpers: parse JSON safely and extract backend message\r\n---------------------------------------------*/ async function parseJsonSafe(resp) {\n    const text = await resp.text();\n    try {\n        return text ? JSON.parse(text) : null;\n    } catch  {\n        return text || null;\n    }\n}\nfunction extractErrorMessage(parsedBody) {\n    if (!parsedBody) return \"Unknown error\";\n    if (typeof parsedBody === \"string\") return parsedBody;\n    if (parsedBody.detail) return parsedBody.detail;\n    if (parsedBody.error) return parsedBody.error;\n    if (parsedBody.message) return parsedBody.message;\n    return JSON.stringify(parsedBody);\n}\n/** Login against backend auth. Stores token in localStorage on success. */ async function login(credentials) {\n    const resp = await fetch(`${API_BASE}/api/auth/login`, {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(credentials)\n    });\n    const parsed = await parseJsonSafe(resp);\n    if (!resp.ok) {\n        throw new Error(extractErrorMessage(parsed) || \"Login failed\");\n    }\n    const data = parsed;\n    if (!data?.access_token) {\n        throw new Error(\"Login succeeded but server returned no access_token\");\n    }\n    setAuthToken(data.access_token);\n    return data;\n}\n/** Register a new local user (optional if you keep registration server-side) */ async function register(userData) {\n    const resp = await fetch(`${API_BASE}/api/auth/register`, {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(userData)\n    });\n    const parsed = await parseJsonSafe(resp);\n    if (!resp.ok) {\n        throw new Error(extractErrorMessage(parsed) || \"Registration failed\");\n    }\n    return parsed;\n}\n/** Return current user object (requires logged-in token) */ async function getCurrentUser() {\n    const resp = await fetch(`${API_BASE}/api/auth/me`, {\n        headers: getAuthHeaders()\n    });\n    const parsed = await parseJsonSafe(resp);\n    if (!resp.ok) {\n        // If unauthorized, remove stale token proactively\n        if (resp.status === 401) {\n            removeAuthToken();\n        }\n        throw new Error(extractErrorMessage(parsed) || \"Not authenticated\");\n    }\n    // backend returns { user: {...} } in some setups; accept both shapes\n    if (parsed && parsed.user) return parsed.user;\n    return parsed;\n}\nfunction logout() {\n    removeAuthToken();\n}\n/* --------------------------------------------\r\n   Upload Image → POST /upload\r\n   Requires a valid backend token.\r\n   Returns: { jobId: number }\r\n---------------------------------------------*/ async function uploadImage(file) {\n    const token = getAuthToken();\n    if (!token) {\n        throw new Error(\"Please log in to upload images\");\n    }\n    const form = new FormData();\n    form.append(\"file\", file);\n    // Do NOT set Content-Type when using FormData — browser sets proper boundary.\n    const controller = new AbortController();\n    const timeoutId = setTimeout(()=>controller.abort(), 60000); // 60s\n    try {\n        const resp = await fetch(`${API_BASE}/upload`, {\n            method: \"POST\",\n            headers: getAuthHeaders(),\n            body: form,\n            signal: controller.signal\n        });\n        clearTimeout(timeoutId);\n        const parsed = await parseJsonSafe(resp);\n        if (!resp.ok) {\n            if (resp.status === 401) {\n                // clear stale token and provide actionable message\n                removeAuthToken();\n                throw new Error(extractErrorMessage(parsed) || \"Please log in to upload images\");\n            }\n            throw new Error(extractErrorMessage(parsed) || \"Upload failed\");\n        }\n        return parsed;\n    } catch (err) {\n        clearTimeout(timeoutId);\n        if (err?.name === \"AbortError\") {\n            throw new Error(\"Upload timeout - please try again\");\n        }\n        throw err;\n    }\n}\n/* --------------------------------------------\r\n   Get Job Result → GET /jobs/:id\r\n---------------------------------------------*/ async function getJob(jobId) {\n    const resp = await fetch(`${API_BASE}/jobs/${jobId}`, {\n        headers: getAuthHeaders()\n    });\n    const parsed = await parseJsonSafe(resp);\n    if (!resp.ok) {\n        if (resp.status === 401) {\n            removeAuthToken();\n        }\n        throw new Error(extractErrorMessage(parsed) || \"Job not found\");\n    }\n    return parsed;\n}\n/* --------------------------------------------\r\n   Get Dashboard (Recent Jobs) → GET /dashboard\r\n---------------------------------------------*/ async function getDashboard() {\n    const resp = await fetch(`${API_BASE}/dashboard`, {\n        headers: getAuthHeaders()\n    });\n    const parsed = await parseJsonSafe(resp);\n    if (!resp.ok) {\n        if (resp.status === 401) removeAuthToken();\n        throw new Error(extractErrorMessage(parsed) || \"Failed to load dashboard\");\n    }\n    return parsed;\n}\n/* --------------------------------------------\r\n   SWR Fetcher (auto-prepends API_BASE)\r\n---------------------------------------------*/ const fetcher = (path)=>fetch(`${API_BASE}${path}`, {\n        headers: getAuthHeaders()\n    }).then(async (res)=>{\n        const parsed = await parseJsonSafe(res);\n        if (!res.ok) throw new Error(extractErrorMessage(parsed) || \"API Error\");\n        return parsed;\n    });\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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c291cmNlc0NvbnRlbnQiOlsiLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgQVBJIEJBU0UgVVJMXHJcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcblxyXG4vLyBJZiBORVhUX1BVQkxJQ19BUElfVVJMIGlzIHNldCDihpIgdXNlIHJlYWwgYmFja2VuZC5cclxuLy8gT3RoZXJ3aXNlIGRlZmF1bHQgdG8gaHR0cDovL2xvY2FsaG9zdDo4MDAwIGZvciBkZXYuXHJcbmV4cG9ydCBjb25zdCBBUElfQkFTRSA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0FQSV9VUkwgfHwgXCJodHRwOi8vbG9jYWxob3N0OjgwMDBcIjtcclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgIEFVVEhFTlRJQ0FUSU9OIEhFTFBFUlNcclxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRBdXRoVG9rZW4oKTogc3RyaW5nIHwgbnVsbCB7XHJcbiAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIpIHJldHVybiBudWxsO1xyXG4gIHJldHVybiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImF1dGhfdG9rZW5cIik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRBdXRoVG9rZW4odG9rZW46IHN0cmluZyk6IHZvaWQge1xyXG4gIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiKSByZXR1cm47XHJcbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJhdXRoX3Rva2VuXCIsIHRva2VuKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUF1dGhUb2tlbigpOiB2b2lkIHtcclxuICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuO1xyXG4gIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFwiYXV0aF90b2tlblwiKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEF1dGhIZWFkZXJzKCk6IEhlYWRlcnNJbml0IHtcclxuICBjb25zdCB0b2tlbiA9IGdldEF1dGhUb2tlbigpO1xyXG4gIGNvbnN0IGhlYWRlcnM6IEhlYWRlcnNJbml0ID0ge307XHJcbiAgaWYgKHRva2VuKSB7XHJcbiAgICBoZWFkZXJzW1wiQXV0aG9yaXphdGlvblwiXSA9IGBCZWFyZXIgJHt0b2tlbn1gO1xyXG4gIH1cclxuICByZXR1cm4gaGVhZGVycztcclxufVxyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgSGVscGVyczogcGFyc2UgSlNPTiBzYWZlbHkgYW5kIGV4dHJhY3QgYmFja2VuZCBtZXNzYWdlXHJcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcbmFzeW5jIGZ1bmN0aW9uIHBhcnNlSnNvblNhZmUocmVzcDogUmVzcG9uc2UpIHtcclxuICBjb25zdCB0ZXh0ID0gYXdhaXQgcmVzcC50ZXh0KCk7XHJcbiAgdHJ5IHtcclxuICAgIHJldHVybiB0ZXh0ID8gSlNPTi5wYXJzZSh0ZXh0KSA6IG51bGw7XHJcbiAgfSBjYXRjaCB7XHJcbiAgICByZXR1cm4gdGV4dCB8fCBudWxsO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZXh0cmFjdEVycm9yTWVzc2FnZShwYXJzZWRCb2R5OiBhbnkpOiBzdHJpbmcge1xyXG4gIGlmICghcGFyc2VkQm9keSkgcmV0dXJuIFwiVW5rbm93biBlcnJvclwiO1xyXG4gIGlmICh0eXBlb2YgcGFyc2VkQm9keSA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIHBhcnNlZEJvZHk7XHJcbiAgaWYgKHBhcnNlZEJvZHkuZGV0YWlsKSByZXR1cm4gcGFyc2VkQm9keS5kZXRhaWw7XHJcbiAgaWYgKHBhcnNlZEJvZHkuZXJyb3IpIHJldHVybiBwYXJzZWRCb2R5LmVycm9yO1xyXG4gIGlmIChwYXJzZWRCb2R5Lm1lc3NhZ2UpIHJldHVybiBwYXJzZWRCb2R5Lm1lc3NhZ2U7XHJcbiAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHBhcnNlZEJvZHkpO1xyXG59XHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICBBdXRoZW50aWNhdGlvbiBBUElcclxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgTG9naW5SZXF1ZXN0IHtcclxuICB1c2VybmFtZTogc3RyaW5nO1xyXG4gIHBhc3N3b3JkOiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUmVnaXN0ZXJSZXF1ZXN0IHtcclxuICB1c2VybmFtZTogc3RyaW5nO1xyXG4gIGVtYWlsOiBzdHJpbmc7XHJcbiAgcGFzc3dvcmQ6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBVc2VyIHtcclxuICBpZDogbnVtYmVyO1xyXG4gIHVzZXJuYW1lOiBzdHJpbmc7XHJcbiAgZW1haWw6IHN0cmluZztcclxuICBpc19hY3RpdmU6IGJvb2xlYW47XHJcbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEF1dGhSZXNwb25zZSB7XHJcbiAgYWNjZXNzX3Rva2VuOiBzdHJpbmc7XHJcbiAgdG9rZW5fdHlwZTogc3RyaW5nO1xyXG4gIHVzZXI6IFVzZXI7XHJcbn1cclxuXHJcbi8qKiBMb2dpbiBhZ2FpbnN0IGJhY2tlbmQgYXV0aC4gU3RvcmVzIHRva2VuIGluIGxvY2FsU3RvcmFnZSBvbiBzdWNjZXNzLiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9naW4oY3JlZGVudGlhbHM6IExvZ2luUmVxdWVzdCk6IFByb21pc2U8QXV0aFJlc3BvbnNlPiB7XHJcbiAgY29uc3QgcmVzcCA9IGF3YWl0IGZldGNoKGAke0FQSV9CQVNFfS9hcGkvYXV0aC9sb2dpbmAsIHtcclxuICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICBoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXHJcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeShjcmVkZW50aWFscyksXHJcbiAgfSk7XHJcblxyXG4gIGNvbnN0IHBhcnNlZCA9IGF3YWl0IHBhcnNlSnNvblNhZmUocmVzcCk7XHJcbiAgaWYgKCFyZXNwLm9rKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoZXh0cmFjdEVycm9yTWVzc2FnZShwYXJzZWQpIHx8IFwiTG9naW4gZmFpbGVkXCIpO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgZGF0YSA9IHBhcnNlZCBhcyBBdXRoUmVzcG9uc2U7XHJcbiAgaWYgKCFkYXRhPy5hY2Nlc3NfdG9rZW4pIHtcclxuICAgIHRocm93IG5ldyBFcnJvcihcIkxvZ2luIHN1Y2NlZWRlZCBidXQgc2VydmVyIHJldHVybmVkIG5vIGFjY2Vzc190b2tlblwiKTtcclxuICB9XHJcbiAgc2V0QXV0aFRva2VuKGRhdGEuYWNjZXNzX3Rva2VuKTtcclxuICByZXR1cm4gZGF0YTtcclxufVxyXG5cclxuLyoqIFJlZ2lzdGVyIGEgbmV3IGxvY2FsIHVzZXIgKG9wdGlvbmFsIGlmIHlvdSBrZWVwIHJlZ2lzdHJhdGlvbiBzZXJ2ZXItc2lkZSkgKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlZ2lzdGVyKHVzZXJEYXRhOiBSZWdpc3RlclJlcXVlc3QpOiBQcm9taXNlPFVzZXI+IHtcclxuICBjb25zdCByZXNwID0gYXdhaXQgZmV0Y2goYCR7QVBJX0JBU0V9L2FwaS9hdXRoL3JlZ2lzdGVyYCwge1xyXG4gICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgIGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcclxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHVzZXJEYXRhKSxcclxuICB9KTtcclxuXHJcbiAgY29uc3QgcGFyc2VkID0gYXdhaXQgcGFyc2VKc29uU2FmZShyZXNwKTtcclxuICBpZiAoIXJlc3Aub2spIHtcclxuICAgIHRocm93IG5ldyBFcnJvcihleHRyYWN0RXJyb3JNZXNzYWdlKHBhcnNlZCkgfHwgXCJSZWdpc3RyYXRpb24gZmFpbGVkXCIpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHBhcnNlZCBhcyBVc2VyO1xyXG59XHJcblxyXG4vKiogUmV0dXJuIGN1cnJlbnQgdXNlciBvYmplY3QgKHJlcXVpcmVzIGxvZ2dlZC1pbiB0b2tlbikgKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEN1cnJlbnRVc2VyKCk6IFByb21pc2U8VXNlcj4ge1xyXG4gIGNvbnN0IHJlc3AgPSBhd2FpdCBmZXRjaChgJHtBUElfQkFTRX0vYXBpL2F1dGgvbWVgLCB7XHJcbiAgICBoZWFkZXJzOiBnZXRBdXRoSGVhZGVycygpLFxyXG4gIH0pO1xyXG5cclxuICBjb25zdCBwYXJzZWQgPSBhd2FpdCBwYXJzZUpzb25TYWZlKHJlc3ApO1xyXG4gIGlmICghcmVzcC5vaykge1xyXG4gICAgLy8gSWYgdW5hdXRob3JpemVkLCByZW1vdmUgc3RhbGUgdG9rZW4gcHJvYWN0aXZlbHlcclxuICAgIGlmIChyZXNwLnN0YXR1cyA9PT0gNDAxKSB7XHJcbiAgICAgIHJlbW92ZUF1dGhUb2tlbigpO1xyXG4gICAgfVxyXG4gICAgdGhyb3cgbmV3IEVycm9yKGV4dHJhY3RFcnJvck1lc3NhZ2UocGFyc2VkKSB8fCBcIk5vdCBhdXRoZW50aWNhdGVkXCIpO1xyXG4gIH1cclxuXHJcbiAgLy8gYmFja2VuZCByZXR1cm5zIHsgdXNlcjogey4uLn0gfSBpbiBzb21lIHNldHVwczsgYWNjZXB0IGJvdGggc2hhcGVzXHJcbiAgaWYgKHBhcnNlZCAmJiBwYXJzZWQudXNlcikgcmV0dXJuIHBhcnNlZC51c2VyIGFzIFVzZXI7XHJcbiAgcmV0dXJuIHBhcnNlZCBhcyBVc2VyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbG9nb3V0KCk6IHZvaWQge1xyXG4gIHJlbW92ZUF1dGhUb2tlbigpO1xyXG59XHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICBVcGxvYWQgSW1hZ2Ug4oaSIFBPU1QgL3VwbG9hZFxyXG4gICBSZXF1aXJlcyBhIHZhbGlkIGJhY2tlbmQgdG9rZW4uXHJcbiAgIFJldHVybnM6IHsgam9iSWQ6IG51bWJlciB9XHJcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBsb2FkSW1hZ2UoZmlsZTogRmlsZSk6IFByb21pc2U8eyBqb2JJZDogbnVtYmVyIH0+IHtcclxuICBjb25zdCB0b2tlbiA9IGdldEF1dGhUb2tlbigpO1xyXG4gIGlmICghdG9rZW4pIHtcclxuICAgIHRocm93IG5ldyBFcnJvcihcIlBsZWFzZSBsb2cgaW4gdG8gdXBsb2FkIGltYWdlc1wiKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IGZvcm0gPSBuZXcgRm9ybURhdGEoKTtcclxuICBmb3JtLmFwcGVuZChcImZpbGVcIiwgZmlsZSk7XHJcblxyXG4gIC8vIERvIE5PVCBzZXQgQ29udGVudC1UeXBlIHdoZW4gdXNpbmcgRm9ybURhdGEg4oCUIGJyb3dzZXIgc2V0cyBwcm9wZXIgYm91bmRhcnkuXHJcbiAgY29uc3QgY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcclxuICBjb25zdCB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IGNvbnRyb2xsZXIuYWJvcnQoKSwgNjAwMDApOyAvLyA2MHNcclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHJlc3AgPSBhd2FpdCBmZXRjaChgJHtBUElfQkFTRX0vdXBsb2FkYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBoZWFkZXJzOiBnZXRBdXRoSGVhZGVycygpLFxyXG4gICAgICBib2R5OiBmb3JtLFxyXG4gICAgICBzaWduYWw6IGNvbnRyb2xsZXIuc2lnbmFsLFxyXG4gICAgfSk7XHJcblxyXG4gICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XHJcblxyXG4gICAgY29uc3QgcGFyc2VkID0gYXdhaXQgcGFyc2VKc29uU2FmZShyZXNwKTtcclxuICAgIGlmICghcmVzcC5vaykge1xyXG4gICAgICBpZiAocmVzcC5zdGF0dXMgPT09IDQwMSkge1xyXG4gICAgICAgIC8vIGNsZWFyIHN0YWxlIHRva2VuIGFuZCBwcm92aWRlIGFjdGlvbmFibGUgbWVzc2FnZVxyXG4gICAgICAgIHJlbW92ZUF1dGhUb2tlbigpO1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihleHRyYWN0RXJyb3JNZXNzYWdlKHBhcnNlZCkgfHwgXCJQbGVhc2UgbG9nIGluIHRvIHVwbG9hZCBpbWFnZXNcIik7XHJcbiAgICAgIH1cclxuICAgICAgdGhyb3cgbmV3IEVycm9yKGV4dHJhY3RFcnJvck1lc3NhZ2UocGFyc2VkKSB8fCBcIlVwbG9hZCBmYWlsZWRcIik7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHBhcnNlZCBhcyB7IGpvYklkOiBudW1iZXIgfTtcclxuICB9IGNhdGNoIChlcnI6IGFueSkge1xyXG4gICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XHJcbiAgICBpZiAoZXJyPy5uYW1lID09PSBcIkFib3J0RXJyb3JcIikge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVcGxvYWQgdGltZW91dCAtIHBsZWFzZSB0cnkgYWdhaW5cIik7XHJcbiAgICB9XHJcbiAgICB0aHJvdyBlcnI7XHJcbiAgfVxyXG59XHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICBHZXQgSm9iIFJlc3VsdCDihpIgR0VUIC9qb2JzLzppZFxyXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEpvYihqb2JJZDogbnVtYmVyKSB7XHJcbiAgY29uc3QgcmVzcCA9IGF3YWl0IGZldGNoKGAke0FQSV9CQVNFfS9qb2JzLyR7am9iSWR9YCwge1xyXG4gICAgaGVhZGVyczogZ2V0QXV0aEhlYWRlcnMoKSxcclxuICB9KTtcclxuXHJcbiAgY29uc3QgcGFyc2VkID0gYXdhaXQgcGFyc2VKc29uU2FmZShyZXNwKTtcclxuICBpZiAoIXJlc3Aub2spIHtcclxuICAgIGlmIChyZXNwLnN0YXR1cyA9PT0gNDAxKSB7XHJcbiAgICAgIHJlbW92ZUF1dGhUb2tlbigpO1xyXG4gICAgfVxyXG4gICAgdGhyb3cgbmV3IEVycm9yKGV4dHJhY3RFcnJvck1lc3NhZ2UocGFyc2VkKSB8fCBcIkpvYiBub3QgZm91bmRcIik7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gcGFyc2VkO1xyXG59XHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICBHZXQgRGFzaGJvYXJkIChSZWNlbnQgSm9icykg4oaSIEdFVCAvZGFzaGJvYXJkXHJcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RGFzaGJvYXJkKCkge1xyXG4gIGNvbnN0IHJlc3AgPSBhd2FpdCBmZXRjaChgJHtBUElfQkFTRX0vZGFzaGJvYXJkYCwge1xyXG4gICAgaGVhZGVyczogZ2V0QXV0aEhlYWRlcnMoKSxcclxuICB9KTtcclxuXHJcbiAgY29uc3QgcGFyc2VkID0gYXdhaXQgcGFyc2VKc29uU2FmZShyZXNwKTtcclxuICBpZiAoIXJlc3Aub2spIHtcclxuICAgIGlmIChyZXNwLnN0YXR1cyA9PT0gNDAxKSByZW1vdmVBdXRoVG9rZW4oKTtcclxuICAgIHRocm93IG5ldyBFcnJvcihleHRyYWN0RXJyb3JNZXNzYWdlKHBhcnNlZCkgfHwgXCJGYWlsZWQgdG8gbG9hZCBkYXNoYm9hcmRcIik7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gcGFyc2VkO1xyXG59XHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICBTV1IgRmV0Y2hlciAoYXV0by1wcmVwZW5kcyBBUElfQkFTRSlcclxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuXHJcbmV4cG9ydCBjb25zdCBmZXRjaGVyID0gKHBhdGg6IHN0cmluZykgPT5cclxuICBmZXRjaChgJHtBUElfQkFTRX0ke3BhdGh9YCwge1xyXG4gICAgaGVhZGVyczogZ2V0QXV0aEhlYWRlcnMoKSxcclxuICB9KS50aGVuKGFzeW5jIChyZXMpID0+IHtcclxuICAgIGNvbnN0IHBhcnNlZCA9IGF3YWl0IHBhcnNlSnNvblNhZmUocmVzKTtcclxuICAgIGlmICghcmVzLm9rKSB0aHJvdyBuZXcgRXJyb3IoZXh0cmFjdEVycm9yTWVzc2FnZShwYXJzZWQpIHx8IFwiQVBJIEVycm9yXCIpO1xyXG4gICAgcmV0dXJuIHBhcnNlZDtcclxuICB9KTtcclxuIl0sIm5hbWVzIjpbIkFQSV9CQVNFIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX0FQSV9VUkwiLCJnZXRBdXRoVG9rZW4iLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwic2V0QXV0aFRva2VuIiwidG9rZW4iLCJzZXRJdGVtIiwicmVtb3ZlQXV0aFRva2VuIiwicmVtb3ZlSXRlbSIsImdldEF1dGhIZWFkZXJzIiwiaGVhZGVycyIsInBhcnNlSnNvblNhZmUiLCJyZXNwIiwidGV4dCIsIkpTT04iLCJwYXJzZSIsImV4dHJhY3RFcnJvck1lc3NhZ2UiLCJwYXJzZWRCb2R5IiwiZGV0YWlsIiwiZXJyb3IiLCJtZXNzYWdlIiwic3RyaW5naWZ5IiwibG9naW4iLCJjcmVkZW50aWFscyIsImZldGNoIiwibWV0aG9kIiwiYm9keSIsInBhcnNlZCIsIm9rIiwiRXJyb3IiLCJkYXRhIiwiYWNjZXNzX3Rva2VuIiwicmVnaXN0ZXIiLCJ1c2VyRGF0YSIsImdldEN1cnJlbnRVc2VyIiwic3RhdHVzIiwidXNlciIsImxvZ291dCIsInVwbG9hZEltYWdlIiwiZmlsZSIsImZvcm0iLCJGb3JtRGF0YSIsImFwcGVuZCIsImNvbnRyb2xsZXIiLCJBYm9ydENvbnRyb2xsZXIiLCJ0aW1lb3V0SWQiLCJzZXRUaW1lb3V0IiwiYWJvcnQiLCJzaWduYWwiLCJjbGVhclRpbWVvdXQiLCJlcnIiLCJuYW1lIiwiZ2V0Sm9iIiwiam9iSWQiLCJnZXREYXNoYm9hcmQiLCJmZXRjaGVyIiwicGF0aCIsInRoZW4iLCJyZXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/lib/api.ts\n");

/***/ })

};
;